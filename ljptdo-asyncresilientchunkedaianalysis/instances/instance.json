{
    "instance_id": "LJPTDO",
    "problem_statement": "The document analysis service suffers from high latency and low availability due to its synchronous, all-or-nothing processing model. It cannot scale with document size and lacks error resilience. The goal is to migrate to an asynchronous, chunked architecture that provides real-time progress and handles transient network failures via retries.",
    "base_commit": "repository_before/",
    "test_patch": "tests/",
    "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_002/tree/main/ljptdo-asyncresilientchunkedaianalysis",
    "environment_setup": "Dockerfile",
    "FAIL_TO_PASS": [
        "tests/test_analysis.py::TestPostEndpoint::test_returns_202_status",
        "tests/test_analysis.py::TestPostEndpoint::test_returns_job_id",
        "tests/test_analysis.py::TestPostEndpoint::test_returns_pending_status",
        "tests/test_analysis.py::TestChunking::test_chunk_text_basic",
        "tests/test_analysis.py::TestChunking::test_chunk_text_exact_division",
        "tests/test_analysis.py::TestChunking::test_chunk_text_single_chunk",
        "tests/test_analysis.py::TestChunking::test_chunk_text_empty",
        "tests/test_analysis.py::TestChunking::test_chunk_text_one_char",
        "tests/test_analysis.py::TestChunking::test_max_chunk_chars_from_request",
        "tests/test_analysis.py::TestRetryLogic::test_max_retries_constant",
        "tests/test_analysis.py::TestRetryLogic::test_chunk_fails_after_max_retries",
        "tests/test_analysis.py::TestRetryLogic::test_chunk_succeeds_on_first_try",
        "tests/test_analysis.py::TestAtomicCounters::test_increment_completed",
        "tests/test_analysis.py::TestAtomicCounters::test_increment_failed",
        "tests/test_analysis.py::TestAtomicCounters::test_multiple_increments",
        "tests/test_analysis.py::TestStateMachine::test_initial_state_is_pending",
        "tests/test_analysis.py::TestStateMachine::test_all_success_transitions_to_completed",
        "tests/test_analysis.py::TestStateMachine::test_all_failed_transitions_to_failed",
        "tests/test_analysis.py::TestStateMachine::test_partial_failure_transitions_to_partial_success",
        "tests/test_analysis.py::TestStateMachine::test_valid_status_values",
        "tests/test_analysis.py::TestGetEndpoint::test_get_returns_job_status",
        "tests/test_analysis.py::TestGetEndpoint::test_get_returns_chunk_errors",
        "tests/test_analysis.py::TestGetEndpoint::test_progress_100_when_all_done",
        "tests/test_analysis.py::TestOrderedReassembly::test_results_merged_in_chunk_order",
        "tests/test_analysis.py::TestOrderedReassembly::test_partial_results_ordered",
        "tests/test_analysis.py::TestDatabaseIsolation::test_background_session_independent_of_request",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_status_column",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_chunk_records_table",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_total_chunks",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_chunks_completed",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_chunks_failed",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_sql_has_indexes",
        "tests/test_analysis.py::TestAlembicMigration::test_downgrade_sql_exists",
        "tests/test_analysis.py::TestAlembicMigration::test_upgrade_callable",
        "tests/test_analysis.py::TestAlembicMigration::test_downgrade_callable",
        "tests/test_analysis.py::TestIntegration::test_job_id_returned_under_100ms",
        "tests/test_analysis.py::TestIntegration::test_full_pipeline_with_mock_ai",
        "tests/test_analysis.py::TestAdversarial::test_one_chunk_always_fails_partial_success",
        "tests/test_analysis.py::TestAdversarial::test_all_chunks_fail_transitions_to_failed",
        "tests/test_analysis.py::TestAdversarial::test_error_summary_populated_on_failure"
    ],
    "PASS_TO_PASS": [
        "tests/test_analysis.py::TestGetEndpoint::test_get_returns_404_for_missing_job",
        "tests/test_analysis.py::TestDatabaseIsolation::test_background_db_creates_new_session"
    ]
}
