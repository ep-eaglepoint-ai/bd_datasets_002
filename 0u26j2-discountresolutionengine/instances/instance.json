{
    "instance_id": "0U26J2",
    "problem_statement": "The objective is to architect a high-precision, non-linear discount engine that evaluates a DAG of promotion rules with inter-dependencies. The engine must solve the complexity of rule-pruning, order-dependent stacking, and financial rounding errors while providing a full audit trail for every calculation. It must maintain ultra-low latency while supporting large-scale simulations against historical order data.",
    "base_commit": "repository_before/",
    "test_patch": "repository_after/",
    "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_002/tree/main/0u26j2-discountresolutionengine",
    "environment_setup": "Dockerfile",
    "FAIL_TO_PASS": [
        "TestDAG_AddRule",
        "TestDAG_DetectCycle_NoCycle",
        "TestDAG_DetectCycle_WithCycle",
        "TestDAG_TopologicalSort",
        "TestDAG_TopologicalSort_TieBreaker",
        "TestDecimal_Add",
        "TestDecimal_Multiply",
        "TestDecimal_Percent",
        "TestDecimal_Round_ISO4217",
        "TestDecimal_NoFloatingPointError",
        "TestDecimal_Comparisons",
        "TestEngine_ExclusiveRule_PrunesBranches",
        "TestEngine_StackableRules_DeterministicOrder",
        "TestEngine_CalculationManifest_ContainsAuditTrail",
        "TestEngine_CalculationManifest_TracksDelta",
        "TestEngine_ThreadSafe",
        "TestEngine_ShadowEvaluation_SnapshotDate",
        "TestEngine_ShadowEvaluation_Idempotent",
        "TestEngine_Buy2Get1_Plus_15Percent_Interaction",
        "TestEngine_Adversarial_500Nodes_DeepNesting",
        "TestEngine_Consistency_1000Parallel",
        "TestCart_TotalPrice",
        "TestEngine_Validate",
        "TestEngine_Validate_MissingDependency",
        "TestEngine_DeterministicManifestEquality_Parallel",
        "TestEngine_TimestampDeterminism",
        "TestEngine_FullManifest_OrderAndDelta",
        "TestEngine_BuyXGetY_PerSKU_Scoping",
        "TestEngine_Evaluate_Idempotence",
        "TestEngine_DeepNesting_StackSafety_1000Chain",
        "TestEngine_Performance_SLA_100Items_200Rules"
    ],
    "PASS_TO_PASS": []
}