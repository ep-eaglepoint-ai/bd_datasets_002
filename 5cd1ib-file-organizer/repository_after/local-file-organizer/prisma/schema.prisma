datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model FileRecord {
  id        Int      @id @default(autoincrement())
  path      String   @unique
  filename  String
  extension String
  size      BigInt
  createdAt DateTime
  updatedAt DateTime
  isDirectory Boolean @default(false)
  mimeType  String?
  hash      String?
  tags      Tag[]    @relation("FileTags")
  
  // For handling re-scans
  lastScannedAt DateTime @default(now())

  // Indexes for performance at scale
  @@index([filename])
  @@index([extension])
  @@index([hash])
  @@index([size])
  @@index([updatedAt])
  @@index([lastScannedAt])
}

model Tag {
  id    Int    @id @default(autoincrement())
  name  String @unique
  files FileRecord[] @relation("FileTags")
}
