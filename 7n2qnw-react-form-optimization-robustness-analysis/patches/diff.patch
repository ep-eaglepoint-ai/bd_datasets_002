diff --git a/repository_before/components/category-form.tsx b/repository_after/components/category-form.tsx
index f094c93..38cbdf9 100644
--- a/repository_before/components/category-form.tsx
+++ b/repository_after/components/category-form.tsx
@@ -1,15 +1,14 @@
-
 "use client";
 
 import * as z from "zod";
-import axios from "axios";
-import { useState } from "react";
+import { useState, useCallback, useRef, useEffect, useMemo } from "react";
 import { zodResolver } from "@hookform/resolvers/zod";
 import { useForm } from "react-hook-form";
 import { toast } from "react-hot-toast";
 import { Trash } from "lucide-react";
 import { Billboard, Category } from "@prisma/client";
 import { useParams, useRouter } from "next/navigation";
+import React from 'react';
 
 import { Input } from "@/components/ui/input";
 import { Button } from "@/components/ui/button";
@@ -45,7 +44,7 @@ interface CategoryFormProps {
     billboards: Billboard[];
 }
 
-export const CategoryForm: React.FC<CategoryFormProps> = ({
+export const CategoryForm: React.FC<CategoryFormProps> = React.memo(({
     initialData,
     billboards,
 }) => {
@@ -55,10 +54,35 @@ export const CategoryForm: React.FC<CategoryFormProps> = ({
     const [open, setOpen] = useState(false);
     const [loading, setLoading] = useState(false);
 
-    const title = initialData ? "Edit category" : "Create category";
-    const description = initialData ? "Edit a category." : "Add a new category";
-    const toastMessage = initialData ? "Category updated." : "Category created.";
-    const action = initialData ? "Save changes" : "Create";
+    // Lifecycle controls
+    const isSubmitting = useRef(false);
+    const isMounted = useRef(false);
+    const abortControllerRef = useRef<AbortController | null>(null);
+    const requestIdRef = useRef(0);
+
+    useEffect(() => {
+        isMounted.current = true;
+        return () => {
+            isMounted.current = false;
+            abortControllerRef.current?.abort();
+        };
+    }, []);
+
+    const uiText = useMemo(() => {
+        return initialData
+            ? {
+                title: "Edit category",
+                description: "Edit a category.",
+                action: "Save changes",
+                success: "Category updated.",
+            }
+            : {
+                title: "Create category",
+                description: "Add a new category",
+                action: "Create",
+                success: "Category created.",
+            };
+    }, [initialData]);
 
     const form = useForm<CategoryFormValues>({
         resolver: zodResolver(formSchema),
@@ -68,45 +92,110 @@ export const CategoryForm: React.FC<CategoryFormProps> = ({
         },
     });
 
-    const onSubmit = async (data: CategoryFormValues) => {
-        try {
+    useEffect(() => {
+        if (initialData) {
+            form.reset({
+                name: initialData.name,
+                billboardId: initialData.billboardId,
+            });
+        }
+    }, [initialData, form]);
+
+    const onSubmit = useCallback(
+        async (data: CategoryFormValues) => {
+            if (isSubmitting.current) return;
+
+            const requestId = ++requestIdRef.current;
+            isSubmitting.current = true;
             setLoading(true);
-            if (initialData) {
-                await axios.patch(
-                    `/api/${params.storeId}/categories/${params.categoryId}`,
-                    data
+
+            abortControllerRef.current?.abort();
+            const controller = new AbortController();
+            abortControllerRef.current = controller;
+
+            try {
+                const res = await fetch(
+                    initialData
+                        ? `/api/${params.storeId}/categories/${params.categoryId}`
+                        : `/api/${params.storeId}/categories`,
+                    {
+                        method: initialData ? "PATCH" : "POST",
+                        headers: { "Content-Type": "application/json" },
+                        body: JSON.stringify({
+                            ...data,
+                            _idempotencyKey: requestId, // client-side idempotency hint
+                        }),
+                        signal: controller.signal,
+                    }
                 );
-            } else {
-                await axios.post(`/api/${params.storeId}/categories`, data);
+
+                if (!res.ok) throw new Error("Request failed");
+
+                if (!isMounted.current || requestId !== requestIdRef.current) return;
+
+                toast.success(uiText.success);
+                router.push(`/${params.storeId}/categories`);
+            } catch (err: any) {
+                if (err.name !== "AbortError") {
+                    toast.error("Something went wrong.");
+                }
+            } finally {
+                if (isMounted.current && requestId === requestIdRef.current) {
+                    isSubmitting.current = false;
+                    setLoading(false);
+                }
             }
-            router.refresh();
-            router.push(`/${params.storeId}/categories`);
-            toast.success(toastMessage);
-        } catch (error: any) {
-            toast.error("Something went wrong.");
-        } finally {
-            setLoading(false);
-        }
-    };
+        },
+        [initialData, params.storeId, params.categoryId, router, uiText.success]
+    );
+
+    const onDelete = useCallback(async () => {
+        if (isSubmitting.current) return;
+
+        const requestId = ++requestIdRef.current;
+        isSubmitting.current = true;
+        setLoading(true);
+
+        abortControllerRef.current?.abort();
+        const controller = new AbortController();
+        abortControllerRef.current = controller;
 
-    const onDelete = async () => {
         try {
-            setLoading(true);
-            await axios.delete(
-                `/api/${params.storeId}/categories/${params.categoryId}`
+            const res = await fetch(
+                `/api/${params.storeId}/categories/${params.categoryId}`,
+                { method: "DELETE", signal: controller.signal }
             );
-            router.refresh();
-            router.push(`/${params.storeId}/categories`);
+
+            if (!res.ok) throw new Error("Delete failed");
+
+            if (!isMounted.current || requestId !== requestIdRef.current) return;
+
             toast.success("Category deleted.");
-        } catch (error: any) {
-            toast.error(
-                "Make sure you removed all products using this category first."
-            );
+            router.push(`/${params.storeId}/categories`);
+        } catch (err: any) {
+            if (err.name !== "AbortError") {
+                toast.error(
+                    "Make sure you removed all products using this category first."
+                );
+            }
         } finally {
-            setLoading(false);
-            setOpen(false);
+            if (isMounted.current && requestId === requestIdRef.current) {
+                isSubmitting.current = false;
+                setLoading(false);
+                setOpen(false);
+            }
         }
-    };
+    }, [params.storeId, params.categoryId, router]);
+
+    const billboardOptions = useMemo(
+        () =>
+            billboards.map((billboard) => (
+                <SelectItem key={billboard.id} value={billboard.id}>
+                    {billboard.label}
+                </SelectItem>
+            )),
+        [billboards]
+    );
 
     return (
         <>
@@ -117,7 +206,7 @@ export const CategoryForm: React.FC<CategoryFormProps> = ({
                 loading={loading}
             />
             <div className="flex items-center justify-between">
-                <Heading title={title} description={description} />
+                <Heading title={uiText.title} description={uiText.description} />
                 {initialData && (
                     <Button
                         disabled={loading}
@@ -174,11 +263,7 @@ export const CategoryForm: React.FC<CategoryFormProps> = ({
                                             </SelectTrigger>
                                         </FormControl>
                                         <SelectContent>
-                                            {billboards.map((billboard) => (
-                                                <SelectItem key={billboard.id} value={billboard.id}>
-                                                    {billboard.label}
-                                                </SelectItem>
-                                            ))}
+                                            {billboardOptions}
                                         </SelectContent>
                                     </Select>
                                     <FormMessage />
@@ -187,11 +272,10 @@ export const CategoryForm: React.FC<CategoryFormProps> = ({
                         />
                     </div>
                     <Button disabled={loading} className="ml-auto" type="submit">
-                        {action}
+                        {uiText.action}
                     </Button>
                 </form>
             </Form>
         </>
     );
-};
-
+});
