{
  "instance_id": "2LBQGU",
  "problem_statement": "Noticed a performance challenge when testing the expense splitting application with large groups. The group detail page takes 15-20 seconds to load when a group has 50 members and 10,000 expenses. Database monitoring shows 200+ queries firing sequentially during the calculateGroupBalances function call in lib/balance-utils.ts. The page also fetches all expenses without pagination, causing memory spikes. Users report timeouts and the database CPU reaches 100% during balance queries. The system needs to maintain sub-2-second response times while keeping balance calculations accurate and settlement suggestions identical to current results.",
  "base_commit": "repository_before/",
  "test_patch": "tests/",
  "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_002/tree/main/2lbqgu-expense-splitter-prisma-query-performance-optimization",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [
    "repository_before::Balance Calculations (repository_before) Query count is constant (O(1)) and < 20"
  ],
  "PASS_TO_PASS": [
    "repository_after::Balance Calculations (repository_after) Balance calculation completes within 2 seconds",
    "repository_after::Balance Calculations (repository_after) Query count is constant (O(1)) and < 20",
    "repository_after::Balance Calculations (repository_after) Memory usage stays under 100MB",
    "repository_after::Balance Calculations (repository_after) Balance calculation accuracy and formula verification",
    "repository_after::Balance Calculations (repository_after) Prisma ORM methods only - no raw SQL",
    "repository_after::Settlement Algorithm Tests (repository_after) Settlement algorithm produces identical results",
    "repository_after::Settlement Algorithm Tests (repository_after) Balance formatting accuracy"
  ]
}
