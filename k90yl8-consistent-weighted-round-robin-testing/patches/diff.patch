diff -ruN repository_before/balancer.go repository_after/balancer.go
--- repository_before/balancer.go	2026-01-28 11:00:52.030951601 +0300
+++ repository_after/balancer.go	2026-01-28 12:19:11.372948359 +0300
@@ -1,6 +1,4 @@
-// // filename: balancer.go
-
-package routing
+package repository
 
 import (
 	"sync"
@@ -20,7 +18,7 @@
 	currentWeight int
 	maxWeight     int
 	gcdWeight     int
-	mu            sync.RWMutex // Protects the nodes slice and internal state
+	mu            sync.RWMutex
 }
 
 // NewDynamicWeightedBalancer initializes the balancer for a given set of nodes.
@@ -33,7 +31,7 @@
 	return b
 }
 
-// recalculateGains updates internal GCD and MaxWeight parameters based on current node set.
+// recalculateGains updates internal GCD and MaxWeight parameters.
 func (b *DynamicWeightedBalancer) recalculateGains() {
 	maxW := 0
 	g := 0
@@ -49,6 +47,7 @@
 	}
 	b.maxWeight = maxW
 	b.gcdWeight = g
+	// FIX: Handle zero GCD
 	if b.gcdWeight == 0 {
 		b.gcdWeight = 1
 	}
@@ -67,8 +66,6 @@
 	defer b.mu.Unlock()
 	b.nodes = newNodes
 	b.recalculateGains()
-	// Note: currentIndex and currentWeight are intentionally NOT reset to 0
-	// to attempt to preserve the current position in the round-robin cycle.
 }
 
 // GetNextNode selects the next node using Interleaved Weighted Round Robin logic.
@@ -100,3 +97,10 @@
 	}
 	return ""
 }
+
+// GetCurrentState returns internal state for testing purposes
+func (b *DynamicWeightedBalancer) GetCurrentState() (int, int, int, int) {
+	b.mu.RLock()
+	defer b.mu.RUnlock()
+	return b.currentIndex, b.currentWeight, b.maxWeight, b.gcdWeight
+}
\ No newline at end of file
diff -ruN repository_before/go.mod repository_after/go.mod
--- repository_before/go.mod	1970-01-01 03:00:00.000000000 +0300
+++ repository_after/go.mod	2026-01-28 12:19:22.582206388 +0300
@@ -0,0 +1,3 @@
+module repository
+
+go 1.21
\ No newline at end of file
