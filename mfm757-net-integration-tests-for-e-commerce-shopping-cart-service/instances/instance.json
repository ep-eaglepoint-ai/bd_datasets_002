{
  "instance_id": "MFM757",
  "problem_statement": "The e-commerce platform's shopping cart service handles cart operations, inventory checks, and checkout processing but has no integration test coverage. Recent production issues included race conditions when multiple users added the same limited-stock item, incorrect price calculations during concurrent cart updates, and orphaned cart records after failed checkouts.\n\nThe service uses Entity Framework Core with SQL Server. Need comprehensive integration tests that verify database interactions, API contracts, and concurrent access scenarios.",
  "base_commit": "repository_before/",
  "test_patch": "tests/",
  "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_002/tree/main/mfm757-net-integration-tests-for-e-commerce-shopping-cart-service",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [
    "EcommerceCart.Tests.InventoryServiceCheckAvailabilityTests.CheckAvailabilityAsync_ReturnsFalse_WhenProductInactive",
    "EcommerceCart.Tests.InventoryServiceReserveStockTests.ReserveStockAsync_ThrowsException_WhenInsufficientStock",
    "EcommerceCart.Tests.InventoryServiceCheckAvailabilityTests.CheckAvailabilityAsync_ReturnsFalse_WhenInsufficientStock",
    "EcommerceCart.Tests.InventoryServiceReserveStockTests.ReserveStockAsync_IncreasesReservedQuantity",
    "EcommerceCart.Tests.InventoryServiceCheckAvailabilityTests.CheckAvailabilityAsync_ReturnsFalse_WhenProductNotFound",
    "EcommerceCart.Tests.InventoryServiceCheckAvailabilityTests.CheckAvailabilityAsync_ReturnsTrue_WhenSufficientStock",
    "EcommerceCart.Tests.CartServiceRemoveItemTests.RemoveItemAsync_ThrowsException_WhenItemNotFound",
    "EcommerceCart.Tests.CartServiceAddItemTests.AddItemAsync_UpdatesExistingItemQuantity_WhenProductAlreadyInCart",
    "EcommerceCart.Tests.CartServiceRemoveItemTests.RemoveItemAsync_RemovesItemFromCart_AndReleasesStock",
    "EcommerceCart.Tests.DatabaseStateVerificationTests.AddItem_PersistsChangesCorrectly",
    "EcommerceCart.Tests.CartServiceAddItemTests.AddItemAsync_ReservesStockInInventory",
    "EcommerceCart.Tests.InventoryServiceReleaseStockTests.ReleaseStockAsync_HandlesReleasingMoreThanReserved_Gracefully",
    "EcommerceCart.Tests.InventoryServiceReleaseStockTests.ReleaseStockAsync_DecreasesReservedQuantity",
    "EcommerceCart.Tests.CartServiceAddItemTests.AddItemAsync_AddsItemToCart_AndReservesStock",
    "EcommerceCart.Tests.CheckoutServiceUnauthorizedTests.ProcessCheckoutAsync_ThrowsUnauthorizedAccessException_WhenUserMismatch",
    "EcommerceCart.Tests.InventoryServiceConfirmReservationsTests.ConfirmReservationsAsync_DeductsFromBothStockAndReserved",
    "EcommerceCart.Tests.CheckoutServiceProcessCheckoutSuccessTests.ProcessCheckoutAsync_CreatesConfirmedOrder_OnSuccess",
    "EcommerceCart.Tests.DatabaseStateVerificationTests.Checkout_PersistsOrderAndUpdatesCart",
    "EcommerceCart.Tests.CartServiceGetOrCreateTests.GetOrCreateCartAsync_CreatesSeparateCarts_ForDifferentUsers",
    "EcommerceCart.Tests.CheckoutServiceProcessCheckoutSuccessTests.ProcessCheckoutAsync_ConfirmsInventoryReservations",
    "EcommerceCart.Tests.CheckoutServiceCalculateTotalTests.CalculateTotal_Applies5PercentDiscount_WhenSubtotalIsAtLeast500",
    "EcommerceCart.Tests.CheckoutServiceCalculateTotalTests.CalculateTotal_NoDiscount_WhenSubtotalBelow500",
    "EcommerceCart.Tests.CheckoutServiceCalculateTotalTests.CalculateTotal_Calculates8PercentTax_OnDiscountedAmount",
    "EcommerceCart.Tests.CheckoutServiceCalculateTotalTests.CalculateTotal_RoundsToTwoDecimalPlaces",
    "EcommerceCart.Tests.CheckoutServiceCalculateTotalTests.CalculateTotal_ComputesCorrectSubtotal",
    "EcommerceCart.Tests.InvalidQuantityTests.AddItemAsync_ThrowsArgumentException_WhenQuantityExceeds99",
    "EcommerceCart.Tests.NonExistentProductTests.AddItemAsync_ThrowsInvalidOperationException_ForNonExistentProduct",
    "EcommerceCart.Tests.InactiveProductTests.AddItemAsync_ThrowsInvalidOperationException_ForInactiveProduct",
    "EcommerceCart.Tests.CartServiceClearCartTests.ClearCartAsync_RemovesAllItems_AndReleasesAllReservations",
    "EcommerceCart.Tests.CheckoutServiceEmptyCartTests.ProcessCheckoutAsync_ThrowsException_WhenCartIsEmpty",
    "EcommerceCart.Tests.CheckoutServicePaymentFailureTests.ProcessCheckoutAsync_CreatesFailedOrder_WhenPaymentFails",
    "EcommerceCart.Tests.EdgeCaseTests.AddItem_ThrowsException_WhenInsufficientStock",
    "EcommerceCart.Tests.EdgeCaseTests.RemoveItem_ThrowsException_WhenCartNotFound",
    "EcommerceCart.Tests.EdgeCaseTests.UpdateQuantity_ThrowsException_WhenCartNotFound",
    "EcommerceCart.Tests.EdgeCaseTests.UpdateQuantity_ThrowsException_WhenInsufficientStock",
    "EcommerceCart.Tests.EdgeCaseTests.UpdateQuantity_ThrowsException_WhenItemNotFound",
    "EcommerceCart.Tests.EdgeCaseTests.CalculateTotal_HandlesEmptyCart",
    "EcommerceCart.Tests.CartServiceUpdateQuantityTests.UpdateQuantityAsync_DecreasesQuantity_AndReleasesExcessStock",
    "EcommerceCart.Tests.CartServiceUpdateQuantityTests.UpdateQuantityAsync_IncreasesQuantity_AndReservesMoreStock",
    "EcommerceCart.Tests.CartServiceGetOrCreateTests.GetOrCreateCartAsync_ReturnsExistingCart_OnSubsequentCalls",
    "EcommerceCart.Tests.CartServiceGetOrCreateTests.GetOrCreateCartAsync_CreatesNewCart_ForSessionId",
    "EcommerceCart.Tests.CartServiceGetOrCreateTests.GetOrCreateCartAsync_CreatesNewCart_ForUserId",
    "EcommerceCart.Tests.ConcurrencyTests.ConcurrentAddToCart_OnlyReservesAvailableStock",
    "EcommerceCart.Tests.ConcurrencyTests.ConcurrentUpdateQuantity_MaintainsDataIntegrity"
  ],
  "PASS_TO_PASS": []
}
