{
  "run_id": "e7d4337b-4db3-4ed2-8be6-d42fd5b8c420",
  "started_at": "2026-01-28T08:59:49.379Z",
  "finished_at": "2026-01-28T09:00:03.257Z",
  "duration_seconds": 13.878,
  "environment": {
    "node_version": "v22.20.0",
    "platform": "win32-x64"
  },
  "before": {
    "tests": {
      "passed": false,
      "return_code": 1,
      "output": "> language-detection-tests@1.0.0 test:before\n> jest --runInBand --config=jest.before.config.js\n\n\nFAIL before tests/languageDetection.test.ts\n  Language Detection Utility - Requirements Validation\n    Requirement 1: Empty and whitespace-only inputs\n      √ should return reason \"empty\" for empty string (6 ms)\n      × should return reason \"empty\" for whitespace-only input (spaces) (7 ms)\n      × should return reason \"empty\" for whitespace-only input (tabs) (2 ms)\n      × should return reason \"empty\" for whitespace-only input (newlines) (1 ms)\n      × should return reason \"empty\" for mixed whitespace (1 ms)\n    Requirement 2: Non-Latin characters must return \"non_latin\" before other classifications\n      × should return \"non_latin\" for single Arabic word (not \"too_short\") (2 ms)\n      × should return \"non_latin\" for Chinese characters (1 ms)\n      × should return \"non_latin\" for Cyrillic text (1 ms)\n      × should return \"non_latin\" for Japanese Hiragana (1 ms)\n      × should return \"non_latin\" for Japanese Katakana (1 ms)\n      × should return \"non_latin\" for Korean Hangul (1 ms)\n      × should return \"non_latin\" for Devanagari (Hindi) (1 ms)\n      × should return \"non_latin\" for Bengali script (1 ms)\n      × should return \"non_latin\" for Tamil script (9 ms)\n      × should return \"non_latin\" for Telugu script (1 ms)\n      × should return \"non_latin\" for Malayalam script (1 ms)\n      × should return \"non_latin\" for mixed Latin and non-Latin text (1 ms)\n    Requirement 3: Texts with fewer than 5 words must return \"too_short\"\n      √ should return \"too_short\" for 4 words with normal spacing (1 ms)\n      × should return \"too_short\" for 4 words with multiple consecutive spaces (4 ms)\n      √ should return \"too_short\" for 3 words\n      √ should return \"too_short\" for 2 words (1 ms)\n      √ should return \"too_short\" for 1 word\n      √ should handle leading/trailing spaces correctly when counting words (1 ms)\n      √ should NOT return \"too_short\" for exactly 5 words (2 ms)\n      √ should NOT return \"too_short\" for more than 5 words (1 ms)\n    Requirement 4: Pure English text must return isEnglish: true with reason \"valid\"\n      × should return isEnglish: true and reason: \"valid\" for \"The quick brown fox jumps over the lazy dog\" (1 ms)\n      √ should return isEnglish: true for simple English sentence (1 ms)\n      √ should return isEnglish: true for longer English text (1 ms)\n      √ should return isEnglish: true for English with punctuation (1 ms)\n      √ should return isEnglish: true for English with numbers (1 ms)\n    Requirement 5: Results must be deterministic\n      √ should return identical results for same input called 3 times - English text (2 ms)\n      √ should return identical results for same input called 3 times - short text (1 ms)\n      √ should return identical results for same input called 3 times - non-Latin text (1 ms)\n      √ should return identical results for same input called 3 times - whitespace\n      √ should not be affected by previous calls with different inputs (1 ms)\n    Requirement 6: detectLanguage must return null (not undefined) for empty/undetermined inputs\n      √ should return null for empty string\n      × should return null for whitespace-only input\n      × should return null for tabs\n      × should return null for newlines (1 ms)\n      √ should return null when franc returns \"und\" (undetermined) (1 ms)\n    Requirement 7: Unicode ranges must be correctly bounded\n      × should match Arabic character at end of range (U+06FF)\n      × should match CJK character at end of range (U+9FFF) (1 ms)\n      × should match Hangul character at end of range (U+D7AF) (1 ms)\n      × should match various Arabic characters in range (1 ms)\n      × should match various CJK characters in range (1 ms)\n      × should match various Hangul characters in range\n      √ should NOT match Latin characters\n    Requirement 8: COMMON_NON_ENGLISH_WORDS must not contain English words\n      × should NOT falsely flag pure English text as non-English (1 ms)\n      √ should correctly identify Spanish text with non-English words (1 ms)\n      √ should correctly identify Vietnamese text with non-English words (2 ms)\n    Requirement 9: No breaking changes to function signatures\n      √ checkLanguage should accept string and return LanguageCheckResult (1 ms)\n      √ isEnglish should accept string and return boolean\n      √ detectLanguage should accept string and return string or null (1 ms)\n    Requirement 10: Must handle any string input without throwing exceptions\n      √ should handle empty string without throwing (1 ms)\n      √ should handle extremely long strings without throwing (5 ms)\n      √ should handle special characters without throwing\n      √ should handle Unicode characters without throwing\n      √ should handle mixed content without throwing (1 ms)\n      √ should handle newlines and tabs without throwing (1 ms)\n    Requirement 12: All validation scenarios must pass\n      × Scenario 1: \"The quick brown fox jumps over the lazy dog\" → isEnglish: true, reason: \"valid\" (1 ms)\n      × Scenario 2: \"   \" (whitespace only) → isEnglish: false, reason: \"empty\" (1 ms)\n      × Scenario 3: \"one  two   three    four\" (4 words with extra spaces) → reason: \"too_short\" (1 ms)\n      × Scenario 4: \"مرحبا\" (single Arabic word) → reason: \"non_latin\" (not \"too_short\")\n      √ Scenario 5: Same input called 3 times must return identical results (1 ms)\n      × Scenario 6: detectLanguage(\"   \") → null (not undefined) (1 ms)\n    Edge Cases and Additional Validation\n      √ should handle text with only numbers (1 ms)\n      √ should handle text with only punctuation\n      √ should handle single character (1 ms)\n      √ should handle exactly 5 words correctly (1 ms)\n      × should handle text with leading and trailing whitespace (1 ms)\n      × should handle mixed case text (1 ms)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (spaces)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"empty\"\n    Received: \"too_short\"\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m checkLanguage(\u001b[32m'   '\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m       expect(result\u001b[33m.\u001b[39misEnglish)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m       expect(result\u001b[33m.\u001b[39mreason)\u001b[33m.\u001b[39mtoBe(\u001b[32m'empty'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m\n     \u001b[90m 32 |\u001b[39m     it(\u001b[32m'should return reason \"empty\" for whitespace-only input (tabs)'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/languageDetection.test.ts:29:29)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (tabs)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"empty\"\n    Received: \"too_short\"\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m checkLanguage(\u001b[32m'\\t\\t\\t'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m       expect(result\u001b[33m.\u001b[39misEnglish)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       expect(result\u001b[33m.\u001b[39mreason)\u001b[33m.\u001b[39mtoBe(\u001b[32m'empty'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m     it(\u001b[32m'should return reason \"empty\" for whitespace-only input (newlines)'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/languageDetection.test.ts:35:29)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (newlines)\n\n    expect(received).toBe(expected) // Object.is equality\n\n \n...[truncated]"
    },
    "metrics": {}
  },
  "after": {
    "tests": {
      "passed": true,
      "return_code": 0,
      "output": "> language-detection-tests@1.0.0 test:after\n> jest --runInBand\n\n\nPASS after tests/languageDetection.test.ts\n  Language Detection Utility - Requirements Validation\n    Requirement 1: Empty and whitespace-only inputs\n      √ should return reason \"empty\" for empty string (5 ms)\n      √ should return reason \"empty\" for whitespace-only input (spaces) (2 ms)\n      √ should return reason \"empty\" for whitespace-only input (tabs) (2 ms)\n      √ should return reason \"empty\" for whitespace-only input (newlines) (1 ms)\n      √ should return reason \"empty\" for mixed whitespace (1 ms)\n    Requirement 2: Non-Latin characters must return \"non_latin\" before other classifications\n      √ should return \"non_latin\" for single Arabic word (not \"too_short\") (1 ms)\n      √ should return \"non_latin\" for Chinese characters (1 ms)\n      √ should return \"non_latin\" for Cyrillic text (1 ms)\n      √ should return \"non_latin\" for Japanese Hiragana\n      √ should return \"non_latin\" for Japanese Katakana (1 ms)\n      √ should return \"non_latin\" for Korean Hangul (1 ms)\n      √ should return \"non_latin\" for Devanagari (Hindi) (1 ms)\n      √ should return \"non_latin\" for Bengali script (1 ms)\n      √ should return \"non_latin\" for Tamil script\n      √ should return \"non_latin\" for Telugu script (1 ms)\n      √ should return \"non_latin\" for Malayalam script (2 ms)\n      √ should return \"non_latin\" for mixed Latin and non-Latin text (2 ms)\n    Requirement 3: Texts with fewer than 5 words must return \"too_short\"\n      √ should return \"too_short\" for 4 words with normal spacing\n      √ should return \"too_short\" for 4 words with multiple consecutive spaces (1 ms)\n      √ should return \"too_short\" for 3 words (1 ms)\n      √ should return \"too_short\" for 2 words\n      √ should return \"too_short\" for 1 word (1 ms)\n      √ should handle leading/trailing spaces correctly when counting words (1 ms)\n      √ should NOT return \"too_short\" for exactly 5 words (3 ms)\n      √ should NOT return \"too_short\" for more than 5 words (2 ms)\n    Requirement 4: Pure English text must return isEnglish: true with reason \"valid\"\n      √ should return isEnglish: true and reason: \"valid\" for \"The quick brown fox jumps over the lazy dog\" (2 ms)\n      √ should return isEnglish: true for simple English sentence (1 ms)\n      √ should return isEnglish: true for longer English text (1 ms)\n      √ should return isEnglish: true for English with punctuation (2 ms)\n      √ should return isEnglish: true for English with numbers (1 ms)\n    Requirement 5: Results must be deterministic\n      √ should return identical results for same input called 3 times - English text (2 ms)\n      √ should return identical results for same input called 3 times - short text (1 ms)\n      √ should return identical results for same input called 3 times - non-Latin text (1 ms)\n      √ should return identical results for same input called 3 times - whitespace (1 ms)\n      √ should not be affected by previous calls with different inputs (1 ms)\n    Requirement 6: detectLanguage must return null (not undefined) for empty/undetermined inputs\n      √ should return null for empty string\n      √ should return null for whitespace-only input\n      √ should return null for tabs (1 ms)\n      √ should return null for newlines (1 ms)\n      √ should return null when franc returns \"und\" (undetermined) (2 ms)\n    Requirement 7: Unicode ranges must be correctly bounded\n      √ should match Arabic character at end of range (U+06FF) (1 ms)\n      √ should match CJK character at end of range (U+9FFF)\n      √ should match Hangul character at end of range (U+D7AF)\n      √ should match various Arabic characters in range (1 ms)\n      √ should match various CJK characters in range (1 ms)\n      √ should match various Hangul characters in range\n      √ should NOT match Latin characters (7 ms)\n    Requirement 8: COMMON_NON_ENGLISH_WORDS must not contain English words\n      √ should NOT falsely flag pure English text as non-English (7 ms)\n      √ should correctly identify Spanish text with non-English words (1 ms)\n      √ should correctly identify Vietnamese text with non-English words (3 ms)\n    Requirement 9: No breaking changes to function signatures\n      √ checkLanguage should accept string and return LanguageCheckResult (2 ms)\n      √ isEnglish should accept string and return boolean (1 ms)\n      √ detectLanguage should accept string and return string or null (1 ms)\n    Requirement 10: Must handle any string input without throwing exceptions\n      √ should handle empty string without throwing (1 ms)\n      √ should handle extremely long strings without throwing (7 ms)\n      √ should handle special characters without throwing (1 ms)\n      √ should handle Unicode characters without throwing (1 ms)\n      √ should handle mixed content without throwing (2 ms)\n      √ should handle newlines and tabs without throwing (1 ms)\n    Requirement 12: All validation scenarios must pass\n      √ Scenario 1: \"The quick brown fox jumps over the lazy dog\" → isEnglish: true, reason: \"valid\" (1 ms)\n      √ Scenario 2: \"   \" (whitespace only) → isEnglish: false, reason: \"empty\" (1 ms)\n      √ Scenario 3: \"one  two   three    four\" (4 words with extra spaces) → reason: \"too_short\" (1 ms)\n      √ Scenario 4: \"مرحبا\" (single Arabic word) → reason: \"non_latin\" (not \"too_short\") (1 ms)\n      √ Scenario 5: Same input called 3 times must return identical results\n      √ Scenario 6: detectLanguage(\"   \") → null (not undefined) (1 ms)\n    Edge Cases and Additional Validation\n      √ should handle text with only numbers (1 ms)\n      √ should handle text with only punctuation\n      √ should handle single character (1 ms)\n      √ should handle exactly 5 words correctly (1 ms)\n      √ should handle text with leading and trailing whitespace (2 ms)\n      √ should handle mixed case text (1 ms)\n\nTest Suites: 1 passed, 1 total\nTests:       71 passed, 71 total\nSnapshots:   0 total\nTime:        4.389 s, estimated 9 s\nRan all test suites."
    },
    "metrics": {}
  },
  "comparison": {
    "passed_gate": true,
    "improvement_summary": "After implementation passed correctness tests."
  },
  "success": true,
  "error": null
}