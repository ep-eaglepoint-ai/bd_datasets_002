{
  "run_id": "14403dc1-7dc1-4f3d-b724-94699129c04a",
  "started_at": "2026-01-28T08:20:31.373Z",
  "finished_at": "2026-01-28T08:20:56.005Z",
  "duration_seconds": 24.632,
  "environment": {
    "node_version": "v22.20.0",
    "platform": "win32-x64"
  },
  "before": {
    "tests": {
      "passed": false,
      "return_code": 1,
      "output": "> language-detection-tests@1.0.0 test:before\n> jest --runInBand --config=jest.before.config.js\n\n\nFAIL before tests/languageDetection.test.ts (5.397 s)\n  Language Detection Utility - Requirements Validation\n    Requirement 1: Empty and whitespace-only inputs\n      √ should return reason \"empty\" for empty string (7 ms)\n      × should return reason \"empty\" for whitespace-only input (spaces) (10 ms)\n      × should return reason \"empty\" for whitespace-only input (tabs) (3 ms)\n      × should return reason \"empty\" for whitespace-only input (newlines) (2 ms)\n      × should return reason \"empty\" for mixed whitespace (1 ms)\n    Requirement 2: Non-Latin characters must return \"non_latin\" before other classifications\n      × should return \"non_latin\" for single Arabic word (not \"too_short\") (3 ms)\n      × should return \"non_latin\" for Chinese characters (1 ms)\n      × should return \"non_latin\" for Cyrillic text (1 ms)\n      × should return \"non_latin\" for Japanese Hiragana (1 ms)\n      × should return \"non_latin\" for Japanese Katakana (6 ms)\n      × should return \"non_latin\" for Korean Hangul (1 ms)\n      × should return \"non_latin\" for Devanagari (Hindi) (1 ms)\n      × should return \"non_latin\" for Bengali script (2 ms)\n      × should return \"non_latin\" for Tamil script (1 ms)\n      × should return \"non_latin\" for Telugu script (3 ms)\n      × should return \"non_latin\" for Malayalam script (2 ms)\n      × should return \"non_latin\" for mixed Latin and non-Latin text (1 ms)\n    Requirement 3: Texts with fewer than 5 words must return \"too_short\"\n      √ should return \"too_short\" for 4 words with normal spacing (1 ms)\n      × should return \"too_short\" for 4 words with multiple consecutive spaces (4 ms)\n      √ should return \"too_short\" for 3 words (4 ms)\n      √ should return \"too_short\" for 2 words (1 ms)\n      √ should return \"too_short\" for 1 word\n      √ should handle leading/trailing spaces correctly when counting words (1 ms)\n      √ should NOT return \"too_short\" for exactly 5 words (3 ms)\n      √ should NOT return \"too_short\" for more than 5 words (1 ms)\n    Requirement 4: Pure English text must return isEnglish: true with reason \"valid\"\n      × should return isEnglish: true and reason: \"valid\" for \"The quick brown fox jumps over the lazy dog\" (1 ms)\n      √ should return isEnglish: true for simple English sentence (2 ms)\n      √ should return isEnglish: true for longer English text (12 ms)\n      √ should return isEnglish: true for English with punctuation (1 ms)\n      √ should return isEnglish: true for English with numbers (1 ms)\n    Requirement 5: Results must be deterministic\n      √ should return identical results for same input called 3 times - English text (2 ms)\n      √ should return identical results for same input called 3 times - short text (1 ms)\n      √ should return identical results for same input called 3 times - non-Latin text (3 ms)\n      √ should return identical results for same input called 3 times - whitespace (2 ms)\n      √ should not be affected by previous calls with different inputs (1 ms)\n    Requirement 6: detectLanguage must return null (not undefined) for empty/undetermined inputs\n      √ should return null for empty string (1 ms)\n      × should return null for whitespace-only input (1 ms)\n      × should return null for tabs (1 ms)\n      × should return null for newlines (1 ms)\n      √ should return null when franc returns \"und\" (undetermined) (3 ms)\n    Requirement 7: Unicode ranges must be correctly bounded\n      × should match Arabic character at end of range (U+06FF) (3 ms)\n      × should match CJK character at end of range (U+9FFF) (1 ms)\n      × should match Hangul character at end of range (U+D7AF)\n      × should match various Arabic characters in range (1 ms)\n      × should match various CJK characters in range (1 ms)\n      × should match various Hangul characters in range (1 ms)\n      √ should NOT match Latin characters (1 ms)\n    Requirement 8: COMMON_NON_ENGLISH_WORDS must not contain English words\n      × should NOT falsely flag pure English text as non-English (1 ms)\n      √ should correctly identify Spanish text with non-English words (3 ms)\n      √ should correctly identify Vietnamese text with non-English words (4 ms)\n    Requirement 9: No breaking changes to function signatures\n      √ checkLanguage should accept string and return LanguageCheckResult (2 ms)\n      √ isEnglish should accept string and return boolean (1 ms)\n      √ detectLanguage should accept string and return string or null (1 ms)\n    Requirement 10: Must handle any string input without throwing exceptions\n      √ should handle empty string without throwing (1 ms)\n      √ should handle extremely long strings without throwing (9 ms)\n      √ should handle special characters without throwing (1 ms)\n      √ should handle Unicode characters without throwing\n      √ should handle mixed content without throwing (1 ms)\n      √ should handle newlines and tabs without throwing (1 ms)\n    Requirement 12: All validation scenarios must pass\n      × Scenario 1: \"The quick brown fox jumps over the lazy dog\" → isEnglish: true, reason: \"valid\" (2 ms)\n      × Scenario 2: \"   \" (whitespace only) → isEnglish: false, reason: \"empty\" (1 ms)\n      × Scenario 3: \"one  two   three    four\" (4 words with extra spaces) → reason: \"too_short\" (1 ms)\n      × Scenario 4: \"مرحبا\" (single Arabic word) → reason: \"non_latin\" (not \"too_short\") (2 ms)\n      √ Scenario 5: Same input called 3 times must return identical results (1 ms)\n      × Scenario 6: detectLanguage(\"   \") → null (not undefined) (1 ms)\n    Edge Cases and Additional Validation\n      √ should handle text with only numbers\n      √ should handle text with only punctuation\n      √ should handle single character\n      √ should handle exactly 5 words correctly (1 ms)\n      × should handle text with leading and trailing whitespace (10 ms)\n      × should handle mixed case text (1 ms)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (spaces)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"empty\"\n    Received: \"too_short\"\n\n      27 |       const result = checkLanguage('   ');\n      28 |       expect(result.isEnglish).toBe(false);\n    > 29 |       expect(result.reason).toBe('empty');\n         |                             ^\n      30 |     });\n      31 |\n      32 |     it('should return reason \"empty\" for whitespace-only input (tabs)', () => {\n\n      at Object.<anonymous> (tests/languageDetection.test.ts:29:29)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (tabs)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"empty\"\n    Received: \"too_short\"\n\n      33 |       const result = checkLanguage('\\t\\t\\t');\n      34 |       expect(result.isEnglish).toBe(false);\n    > 35 |       expect(result.reason).toBe('empty');\n         |                             ^\n      36 |     });\n      37 |\n      38 |     it('should return reason \"empty\" for whitespace-only input (newlines)', () => {\n\n      at Object.<anonymous> (tests/languageDetection.test.ts:35:29)\n\n  ● Language Detection Utility - Requirements Validation › Requirement 1: Empty and whitespace-only inputs › should return reason \"empty\" for whitespace-only input (newlines)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"empty\"\n    Received: \"too_short\"\n\n      39 |       const result = checkLanguage('\\n\\n\\n');\n      40 |       expect(result.isEnglish).toBe(false);\n    > 41 |       expect(result.reason).toBe('empty');\n         |                             ^\n      42 |     });\n      43 |\n      44 |     it('should return reason \"empty\" for mixed whitespace', () => {\n\n      at Object.<anonymous> (tests/languageDetection.test.ts:41:29)\n\n  ● Language Detection Utility - Requirements Val\n...[truncated]"
    },
    "metrics": {}
  },
  "after": {
    "tests": {
      "passed": true,
      "return_code": 0,
      "output": "> language-detection-tests@1.0.0 test:after\n> jest --runInBand\n\n\nPASS after tests/languageDetection.test.ts (5.468 s)\n  Language Detection Utility - Requirements Validation\n    Requirement 1: Empty and whitespace-only inputs\n      √ should return reason \"empty\" for empty string (13 ms)\n      √ should return reason \"empty\" for whitespace-only input (spaces) (3 ms)\n      √ should return reason \"empty\" for whitespace-only input (tabs) (2 ms)\n      √ should return reason \"empty\" for whitespace-only input (newlines) (6 ms)\n      √ should return reason \"empty\" for mixed whitespace (2 ms)\n    Requirement 2: Non-Latin characters must return \"non_latin\" before other classifications\n      √ should return \"non_latin\" for single Arabic word (not \"too_short\") (1 ms)\n      √ should return \"non_latin\" for Chinese characters (1 ms)\n      √ should return \"non_latin\" for Cyrillic text (1 ms)\n      √ should return \"non_latin\" for Japanese Hiragana (1 ms)\n      √ should return \"non_latin\" for Japanese Katakana (1 ms)\n      √ should return \"non_latin\" for Korean Hangul (3 ms)\n      √ should return \"non_latin\" for Devanagari (Hindi) (1 ms)\n      √ should return \"non_latin\" for Bengali script (2 ms)\n      √ should return \"non_latin\" for Tamil script (1 ms)\n      √ should return \"non_latin\" for Telugu script (1 ms)\n      √ should return \"non_latin\" for Malayalam script (1 ms)\n      √ should return \"non_latin\" for mixed Latin and non-Latin text (2 ms)\n    Requirement 3: Texts with fewer than 5 words must return \"too_short\"\n      √ should return \"too_short\" for 4 words with normal spacing (1 ms)\n      √ should return \"too_short\" for 4 words with multiple consecutive spaces (2 ms)\n      √ should return \"too_short\" for 3 words (3 ms)\n      √ should return \"too_short\" for 2 words (1 ms)\n      √ should return \"too_short\" for 1 word (1 ms)\n      √ should handle leading/trailing spaces correctly when counting words (1 ms)\n      √ should NOT return \"too_short\" for exactly 5 words (4 ms)\n      √ should NOT return \"too_short\" for more than 5 words (12 ms)\n    Requirement 4: Pure English text must return isEnglish: true with reason \"valid\"\n      √ should return isEnglish: true and reason: \"valid\" for \"The quick brown fox jumps over the lazy dog\" (2 ms)\n      √ should return isEnglish: true for simple English sentence (2 ms)\n      √ should return isEnglish: true for longer English text (2 ms)\n      √ should return isEnglish: true for English with punctuation (6 ms)\n      √ should return isEnglish: true for English with numbers (2 ms)\n    Requirement 5: Results must be deterministic\n      √ should return identical results for same input called 3 times - English text (4 ms)\n      √ should return identical results for same input called 3 times - short text (2 ms)\n      √ should return identical results for same input called 3 times - non-Latin text (8 ms)\n      √ should return identical results for same input called 3 times - whitespace (1 ms)\n      √ should not be affected by previous calls with different inputs (1 ms)\n    Requirement 6: detectLanguage must return null (not undefined) for empty/undetermined inputs\n      √ should return null for empty string (1 ms)\n      √ should return null for whitespace-only input (1 ms)\n      √ should return null for tabs (1 ms)\n      √ should return null for newlines (1 ms)\n      √ should return null when franc returns \"und\" (undetermined) (1 ms)\n    Requirement 7: Unicode ranges must be correctly bounded\n      √ should match Arabic character at end of range (U+06FF) (1 ms)\n      √ should match CJK character at end of range (U+9FFF) (1 ms)\n      √ should match Hangul character at end of range (U+D7AF) (1 ms)\n      √ should match various Arabic characters in range (1 ms)\n      √ should match various CJK characters in range (1 ms)\n      √ should match various Hangul characters in range (1 ms)\n      √ should NOT match Latin characters (12 ms)\n    Requirement 8: COMMON_NON_ENGLISH_WORDS must not contain English words\n      √ should NOT falsely flag pure English text as non-English (10 ms)\n      √ should correctly identify Spanish text with non-English words (3 ms)\n      √ should correctly identify Vietnamese text with non-English words (3 ms)\n    Requirement 9: No breaking changes to function signatures\n      √ checkLanguage should accept string and return LanguageCheckResult (3 ms)\n      √ isEnglish should accept string and return boolean (1 ms)\n      √ detectLanguage should accept string and return string or null (1 ms)\n    Requirement 10: Must handle any string input without throwing exceptions\n      √ should handle empty string without throwing (4 ms)\n      √ should handle extremely long strings without throwing (9 ms)\n      √ should handle special characters without throwing (2 ms)\n      √ should handle Unicode characters without throwing (1 ms)\n      √ should handle mixed content without throwing (6 ms)\n      √ should handle newlines and tabs without throwing (2 ms)\n    Requirement 12: All validation scenarios must pass\n      √ Scenario 1: \"The quick brown fox jumps over the lazy dog\" → isEnglish: true, reason: \"valid\" (1 ms)\n      √ Scenario 2: \"   \" (whitespace only) → isEnglish: false, reason: \"empty\" (1 ms)\n      √ Scenario 3: \"one  two   three    four\" (4 words with extra spaces) → reason: \"too_short\" (1 ms)\n      √ Scenario 4: \"مرحبا\" (single Arabic word) → reason: \"non_latin\" (not \"too_short\") (1 ms)\n      √ Scenario 5: Same input called 3 times must return identical results (1 ms)\n      √ Scenario 6: detectLanguage(\"   \") → null (not undefined) (1 ms)\n    Edge Cases and Additional Validation\n      √ should handle text with only numbers (3 ms)\n      √ should handle text with only punctuation (1 ms)\n      √ should handle single character (1 ms)\n      √ should handle exactly 5 words correctly (1 ms)\n      √ should handle text with leading and trailing whitespace (1 ms)\n      √ should handle mixed case text (2 ms)\n\nTest Suites: 1 passed, 1 total\nTests:       71 passed, 71 total\nSnapshots:   0 total\nTime:        6.754 s\nRan all test suites."
    },
    "metrics": {}
  },
  "comparison": {
    "passed_gate": true,
    "improvement_summary": "After implementation passed correctness tests."
  },
  "success": true,
  "error": null
}