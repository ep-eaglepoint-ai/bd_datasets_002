{
  "instance_id": "SGM01W",
  "problem_statement": "The project requires a high-performance, isomorphic state management system for user personalization. The challenge is ensuring that UI settings are available to the server during the rendering phase (via Cookies), persisted on the client (via LocalStorage), and synchronized to a central database (via Nitro API) while maintaining strict type safety and cross-tab reactivity.",
  "base_commit": "repository_before/",
  "test_patch": "tests/",
  "github_url": "https://github.com/ep-eaglepoint-ai/bd_datasets_002/tree/main/sgm01w-nuxtpreferencemanagerwithnitro",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [
    "test_requirements.ts::Req 1: Schema validates all valid theme enum values",
    "test_requirements.ts::Req 1: Schema rejects invalid theme value",
    "test_requirements.ts::Req 1: Schema rejects invalid field types",
    "test_requirements.ts::Req 1: Schema rejects missing required fields",
    "test_requirements.ts::Req 2: Composable initializes with default preferences",
    "test_requirements.ts::Req 2: Composable uses existing global state if initialized",
    "test_requirements.ts::Req 2: Composable handles multiple sequential updates",
    "test_requirements.ts::Req 2: Composable state subscription notifies listeners",
    "test_requirements.ts::Req 2: Composable provides reactive state updates",
    "test_requirements.ts::Req 3: SSR initialization with no cookie uses defaults",
    "test_requirements.ts::Req 3: SSR initialization with valid cookie",
    "test_requirements.ts::Req 3: SSR initialization with corrupted cookie falls back",
    "test_requirements.ts::Req 3: SSR applies correct HTML class for all themes",
    "test_requirements.ts::Req 4: Backend handler accepts all valid theme values",
    "test_requirements.ts::Req 4: Backend handler rejects payloads with missing fields",
    "test_requirements.ts::Req 5: Multiple broadcast channels receive same message",
    "test_requirements.ts::Req 5: Broadcast channel unsubscribe stops notifications",
    "test_requirements.ts::Req 5: Broadcast integrates with composable updates",
    "test_requirements.ts::Req 6: LocalStorage validation handles corrupted data",
    "test_requirements.ts::Req 6: Cookie validation falls back on corruption",
    "test_requirements.ts::Req 6: Schema validation rejects extra fields",
    "test_requirements.ts::Req 6: Validation catches all invalid data types",
    "test_requirements.ts::Req 7: All theme values resolve correctly",
    "test_requirements.ts::Req 7: Manual theme override ignores system preference",
    "test_requirements.ts::Req 7: System theme switches based on preference",
    "test_requirements.ts::SSR initialization parses cookie and resolves theme correctly",
    "test_requirements.ts::updatePreference performs optimistic update and triggers async sync",
    "test_requirements.ts::Malformed cookie JSON falls back to default preferences",
    "test_requirements.ts::Backend /api/settings/sync validates and persists data",
    "test_requirements.ts::BroadcastChannel notifies listeners of updates",
    "test_requirements.ts::System theme respects systemPrefersDark flag"
  ],
  "PASS_TO_PASS": [
    "test_requirements.ts::Req 1: Schema validates all valid theme enum values",
    "test_requirements.ts::Req 1: Schema rejects invalid theme value",
    "test_requirements.ts::Req 1: Schema rejects invalid field types",
    "test_requirements.ts::Req 1: Schema rejects missing required fields",
    "test_requirements.ts::Req 2: Composable initializes with default preferences",
    "test_requirements.ts::Req 2: Composable uses existing global state if initialized",
    "test_requirements.ts::Req 2: Composable handles multiple sequential updates",
    "test_requirements.ts::Req 2: Composable state subscription notifies listeners",
    "test_requirements.ts::Req 2: Composable provides reactive state updates",
    "test_requirements.ts::Req 3: SSR initialization with no cookie uses defaults",
    "test_requirements.ts::Req 3: SSR initialization with valid cookie",
    "test_requirements.ts::Req 3: SSR initialization with corrupted cookie falls back",
    "test_requirements.ts::Req 3: SSR applies correct HTML class for all themes",
    "test_requirements.ts::Req 4: Backend handler accepts all valid theme values",
    "test_requirements.ts::Req 4: Backend handler rejects payloads with missing fields",
    "test_requirements.ts::Req 5: Multiple broadcast channels receive same message",
    "test_requirements.ts::Req 5: Broadcast channel unsubscribe stops notifications",
    "test_requirements.ts::Req 5: Broadcast integrates with composable updates",
    "test_requirements.ts::Req 6: LocalStorage validation handles corrupted data",
    "test_requirements.ts::Req 6: Cookie validation falls back on corruption",
    "test_requirements.ts::Req 6: Schema validation rejects extra fields",
    "test_requirements.ts::Req 6: Validation catches all invalid data types",
    "test_requirements.ts::Req 7: All theme values resolve correctly",
    "test_requirements.ts::Req 7: Manual theme override ignores system preference",
    "test_requirements.ts::Req 7: System theme switches based on preference",
    "test_requirements.ts::SSR initialization parses cookie and resolves theme correctly",
    "test_requirements.ts::updatePreference performs optimistic update and triggers async sync",
    "test_requirements.ts::Malformed cookie JSON falls back to default preferences",
    "test_requirements.ts::Backend /api/settings/sync validates and persists data",
    "test_requirements.ts::BroadcastChannel notifies listeners of updates",
    "test_requirements.ts::System theme respects systemPrefersDark flag"
  ]
}
