diff --git a/repository_before/dataAggregation.java b/repository_before/dataAggregation.java
deleted file mode 100644
index f26d96d4c..000000000
--- a/repository_before/dataAggregation.java
+++ /dev/null
@@ -1,98 +0,0 @@
-package com.example.studentapi;
-
-import org.springframework.web.bind.annotation.*;
-import java.util.*;
-
-@RestController
-@RequestMapping("/api/students")
-public class StudentAggregationController {
-
-    private List<Student> cachedStudents = new ArrayList<>();
-
-    @PostMapping("/aggregate")
-    public Map<String, Object> aggregateStudents(@RequestBody List<Student> students) {
-
-        Map<String, Object> response = new HashMap<>();
-
-        if (students == null) {
-            response.put("error", "Students list is null");
-            return response;
-        }
-
-        cachedStudents.clear();
-        cachedStudents.addAll(students);
-
-        int totalScore = 0;
-        double averageScore = 0.0;
-        Student topStudent = null;
-
-        for (int i = 0; i < students.size(); i++) {
-
-            Student current = students.get(i);
-
-            if (current.getScore() < 0) {
-                continue;
-            }
-
-            totalScore = totalScore + current.getScore();
-
-            for (int j = 0; j < students.size(); j++) {
-                if (topStudent == null) {
-                    topStudent = students.get(j);
-                } else {
-                    if (students.get(j).getScore() > topStudent.getScore()) {
-                        topStudent = students.get(j);
-                    }
-                }
-            }
-        }
-
-        if (students.size() > 0) {
-            averageScore = totalScore / students.size();
-        }
-
-        List<String> names = new ArrayList<>();
-        for (Student s : students) {
-            names.add(s.getName());
-        }
-
-        Collections.sort(names);
-
-        response.put("count", students.size());
-        response.put("averageScore", averageScore);
-        response.put("topStudent", topStudent);
-        response.put("sortedNames", names);
-        response.put("cachedSize", cachedStudents.size());
-
-        return response;
-    }
-
-    public static class Student {
-
-        private String name;
-        private int score;
-
-        public Student() {
-        }
-
-        public Student(String name, int score) {
-            this.name = name;
-            this.score = score;
-        }
-
-        public String getName() {
-            return name;
-        }
-
-        public void setName(String name) {
-            this.name = name;
-        }
-
-        public int getScore() {
-            return score;
-        }
-        public void setScore(int score) {
-            this.score = score;
-        }
-    }
-}
diff --git a/repository_after/src/main/java/com/example/studentapi/StudentApiApplication.java b/repository_after/src/main/java/com/example/studentapi/StudentApiApplication.java
new file mode 100644
index 000000000..2fbdcfab5
--- /dev/null
+++ b/repository_after/src/main/java/com/example/studentapi/StudentApiApplication.java
@@ -0,0 +1,12 @@
+package com.example.studentapi;
+
+import org.springframework.boot.SpringApplication;
+import org.springframework.boot.autoconfigure.SpringBootApplication;
+
+@SpringBootApplication
+public class StudentApiApplication {
+    
+    public static void main(String[] args) {
+        SpringApplication.run(StudentApiApplication.class, args);
+    }
+}
\ No newline at end of file
diff --git a/repository_after/src/main/java/com/example/studentapi/controller/StudentAggregationController.java b/repository_after/src/main/java/com/example/studentapi/controller/StudentAggregationController.java
new file mode 100644
index 000000000..e8ccaa6e8
--- /dev/null
+++ b/repository_after/src/main/java/com/example/studentapi/controller/StudentAggregationController.java
@@ -0,0 +1,69 @@
+package com.example.studentapi.controller;
+
+import com.example.studentapi.dto.AggregationResult;
+import com.example.studentapi.dto.Student;
+import com.example.studentapi.service.StudentAggregationService;
+import jakarta.validation.ConstraintViolation;
+import jakarta.validation.Validator;
+import org.springframework.http.HttpStatus;
+import org.springframework.http.ResponseEntity;
+import org.springframework.web.bind.annotation.*;
+
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+
+@RestController
+@RequestMapping("/api/students")
+public class StudentAggregationController {
+
+    private final StudentAggregationService aggregationService;
+    private final Validator validator;
+
+    public StudentAggregationController(StudentAggregationService aggregationService, Validator validator) {
+        this.aggregationService = aggregationService;
+        this.validator = validator;
+    }
+
+    @PostMapping("/aggregate")
+    public ResponseEntity<?> aggregateStudents(@RequestBody List<Student> students) {
+        if (students == null) {
+            Map<String, Object> errorResponse = Map.of("error", "Students list cannot be null");
+            return ResponseEntity.badRequest().body(errorResponse);
+        }
+
+        List<String> validationErrors = validateStudents(students);
+        if (!validationErrors.isEmpty()) {
+            Map<String, Object> errorResponse = new HashMap<>();
+            errorResponse.put("error", "Validation failed");
+            errorResponse.put("validationErrors", validationErrors);
+            return ResponseEntity.badRequest().body(errorResponse);
+        }
+
+        try {
+            AggregationResult result = aggregationService.aggregateStudents(students);
+            return ResponseEntity.ok(result);
+        } catch (Exception e) {
+            Map<String, Object> errorResponse = Map.of("error", "Internal server error occurred");
+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(errorResponse);
+        }
+    }
+
+    private List<String> validateStudents(List<Student> students) {
+        List<String> errors = new ArrayList<>();
+        for (int i = 0; i < students.size(); i++) {
+            Student student = students.get(i);
+            if (student == null) {
+                errors.add("students[" + i + "]: Student cannot be null");
+                continue;
+            }
+            Set<ConstraintViolation<Student>> violations = validator.validate(student);
+            for (ConstraintViolation<Student> v : violations) {
+                errors.add("students[" + i + "]." + v.getPropertyPath() + ": " + v.getMessage());
+            }
+        }
+        return errors;
+    }
+}
\ No newline at end of file
diff --git a/repository_after/src/main/java/com/example/studentapi/dto/AggregationResult.java b/repository_after/src/main/java/com/example/studentapi/dto/AggregationResult.java
new file mode 100644
index 000000000..4679fe586
--- /dev/null
+++ b/repository_after/src/main/java/com/example/studentapi/dto/AggregationResult.java
@@ -0,0 +1,34 @@
+package com.example.studentapi.dto;
+
+import java.util.List;
+
+public class AggregationResult {
+    
+    private int count;
+    private double averageScore;
+    private Student topStudent;
+    private List<String> sortedNames;
+    
+    public AggregationResult(int count, double averageScore, Student topStudent, List<String> sortedNames) {
+        this.count = count;
+        this.averageScore = averageScore;
+        this.topStudent = topStudent;
+        this.sortedNames = sortedNames;
+    }
+    
+    public int getCount() {
+        return count;
+    }
+    
+    public double getAverageScore() {
+        return averageScore;
+    }
+    
+    public Student getTopStudent() {
+        return topStudent;
+    }
+    
+    public List<String> getSortedNames() {
+        return sortedNames;
+    }
+}
\ No newline at end of file
diff --git a/repository_after/src/main/java/com/example/studentapi/dto/Student.java b/repository_after/src/main/java/com/example/studentapi/dto/Student.java
new file mode 100644
index 000000000..3a612d417
--- /dev/null
+++ b/repository_after/src/main/java/com/example/studentapi/dto/Student.java
@@ -0,0 +1,38 @@
+package com.example.studentapi.dto;
+
+import jakarta.validation.constraints.Min;
+import jakarta.validation.constraints.NotBlank;
+import jakarta.validation.constraints.NotNull;
+
+public class Student {
+    
+    @NotBlank(message = "Student name cannot be blank")
+    private String name;
+    
+    @NotNull(message = "Student score cannot be null")
+    @Min(value = 0, message = "Student score must be non-negative")
+    private Integer score;
+    
+    public Student() {}
+    
+    public Student(String name, Integer score) {
+        this.name = name;
+        this.score = score;
+    }
+    
+    public String getName() {
+        return name;
+    }
+    
+    public void setName(String name) {
+        this.name = name;
+    }
+    
+    public Integer getScore() {
+        return score;
+    }
+    
+    public void setScore(Integer score) {
+        this.score = score;
+    }
+}
\ No newline at end of file
diff --git a/repository_after/src/main/java/com/example/studentapi/service/StudentAggregationService.java b/repository_after/src/main/java/com/example/studentapi/service/StudentAggregationService.java
new file mode 100644
index 000000000..46350348b
--- /dev/null
+++ b/repository_after/src/main/java/com/example/studentapi/service/StudentAggregationService.java
@@ -0,0 +1,59 @@
+package com.example.studentapi.service;
+
+import com.example.studentapi.dto.AggregationResult;
+import com.example.studentapi.dto.Student;
+import org.springframework.stereotype.Service;
+
+import java.util.List;
+import java.util.stream.Collectors;
+
+@Service
+public class StudentAggregationService {
+    
+    public AggregationResult aggregateStudents(List<Student> students) {
+        if (students == null || students.isEmpty()) {
+            return new AggregationResult(0, 0.0, null, List.of());
+        }
+        
+        List<Student> validStudents = filterValidStudents(students);
+        
+        int count = validStudents.size();
+        double averageScore = calculateAverageScore(validStudents);
+        Student topStudent = findTopStudent(validStudents);
+        List<String> sortedNames = extractSortedNames(students);
+        
+        return new AggregationResult(count, averageScore, topStudent, sortedNames);
+    }
+    
+    private List<Student> filterValidStudents(List<Student> students) {
+        return students.stream()
+                .filter(student -> student.getScore() != null && student.getScore() >= 0)
+                .collect(Collectors.toList());
+    }
+    
+    private double calculateAverageScore(List<Student> validStudents) {
+        if (validStudents.isEmpty()) {
+            return 0.0;
+        }
+        
+        int totalScore = validStudents.stream()
+                .mapToInt(Student::getScore)
+                .sum();
+        
+        return (double) totalScore / validStudents.size();
+    }
+    
+    private Student findTopStudent(List<Student> validStudents) {
+        return validStudents.stream()
+                .max((s1, s2) -> Integer.compare(s1.getScore(), s2.getScore()))
+                .orElse(null);
+    }
+    
+    private List<String> extractSortedNames(List<Student> students) {
+        return students.stream()
+                .map(Student::getName)
+                .filter(name -> name != null && !name.trim().isEmpty())
+                .sorted()
+                .collect(Collectors.toList());
+    }
+}
\ No newline at end of file
diff --git a/repository_after/src/main/resources/application.properties b/repository_after/src/main/resources/application.properties
new file mode 100644
index 000000000..11bf35271
--- /dev/null
+++ b/repository_after/src/main/resources/application.properties
@@ -0,0 +1,3 @@
+server.port=8080
+spring.application.name=student-aggregation-api
+logging.level.com.example.studentapi=INFO
\ No newline at end of file
