{
  "run_id": "229dfc30-d10d-455d-8cf0-aca73707b978",
  "started_at": "2026-01-31T13:23:53.299Z",
  "finished_at": "2026-01-31T13:24:24.616Z",
  "duration_seconds": 31.317,
  "environment": {
    "node_version": "v22.20.0",
    "platform": "Windows_NT-x64"
  },
  "before": {
    "tests": {
      "passed": false,
      "return_code": 1,
      "output": "No tests implemented in baseline."
    },
    "metrics": {}
  },
  "after": {
    "tests": {
      "passed": true,
      "return_code": 0,
      "output": "PASS repository_after/tests/middleware.test.ts (9.296 s)\nPASS tests/meta.test.ts (20.229 s)\n  ● Console\n\n    console.log\n      --- Child Process Output ---\n\n      at tests/meta.test.ts:14:15\n\n    console.log\n      stdout:\n\n      at tests/meta.test.ts:15:15\n\n    console.log\n      stderr: PASS repository_after/tests/middleware.test.ts (7.793 s)\n        JWT Middleware & Token Management\n          Authentication Middleware\n            √ should call next() for valid access token (18 ms)\n            √ should return 401 for missing header (4 ms)\n            √ should return 401 for invalid format (3 ms)\n            √ should return 401 for invalid signature (4 ms)\n            √ should return 401 for expired token (considering clock tolerance) (5 ms)\n            √ should return 401 for malformed token (2 ms)\n            √ should return 401 for revoked token (3 ms)\n            √ should reject algorithm \"none\" attack (4 ms)\n            √ should ACCEPT tokens expired by up to 30 seconds (clock skew) (6 ms)\n            √ should return 401 for token with future not-before (nbf) claim (5 ms)\n          Refresh Token Logic\n            √ should verify and decode valid refresh token (4 ms)\n            √ should rotate refresh tokens correctly (3 ms)\n            √ should prevent reuse of old refresh token (Replay Attack) (41 ms)\n            √ should fail if refresh token does not have jti (2 ms)\n            √ should handle concurrent refresh attempts (only one succeeds) (5 ms)\n          RBAC Middleware\n            √ should allow access if user has required role (1 ms)\n            √ should deny access if user does not have required role (1 ms)\n            √ should return 401 if user is not authenticated (req.user missing) (1 ms)\n            √ should allow access if user has one of multiple allowed roles (1 ms)\n      \n      Test Suites: 1 passed, 1 total\n      Tests:       19 passed, 19 total\n      Snapshots:   0 total\n      Time:        8.591 s\n      Ran all test suites matching /repository_after\\\\tests\\\\middleware.test.ts/i.\n\n      at tests/meta.test.ts:16:15\n\n    console.log\n      error: null\n\n      at tests/meta.test.ts:17:15\n\n    console.log\n      ----------------------------\n\n      at tests/meta.test.ts:18:15\n\n\nTest Suites: 2 passed, 2 total\nTests:       20 passed, 20 total\nSnapshots:   0 total\nTime:        23.847 s\nRan all test suites.\n"
    },
    "metrics": {}
  },
  "comparison": {
    "passed_gate": true,
    "improvement_summary": "Successfully implemented comprehensive JWT middleware test suite passing all requirements including clock skew, algorithm confusion, and concurrent refresh."
  },
  "success": true,
  "error": null
}