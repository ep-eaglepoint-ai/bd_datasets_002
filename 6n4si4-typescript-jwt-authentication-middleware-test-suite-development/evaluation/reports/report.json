{
  "run_id": "6102cbcb-1ce8-4127-9c3b-bc434a08ec76",
  "started_at": "2026-01-31T13:18:15.366Z",
  "finished_at": "2026-01-31T13:18:37.520Z",
  "duration_seconds": 22.154,
  "environment": {
    "node_version": "v22.20.0",
    "platform": "Windows_NT-x64"
  },
  "before": {
    "tests": {
      "passed": false,
      "return_code": 1,
      "output": "No tests implemented in baseline."
    },
    "metrics": {}
  },
  "after": {
    "tests": {
      "passed": true,
      "return_code": 0,
      "output": "PASS repository_after/tests/middleware.test.ts (8.443 s)\nPASS tests/meta.test.ts (16.646 s)\n  ● Console\n\n    console.log\n      --- Child Process Output ---\n\n      at tests/meta.test.ts:14:15\n\n    console.log\n      stdout:\n\n      at tests/meta.test.ts:15:15\n\n    console.log\n      stderr: PASS repository_after/tests/middleware.test.ts\n        JWT Middleware & Token Management\n          Authentication Middleware\n            √ should call next() for valid access token (43 ms)\n            √ should return 401 for missing header (9 ms)\n            √ should return 401 for invalid format (9 ms)\n            √ should return 401 for invalid signature (7 ms)\n            √ should return 401 for expired token (considering clock tolerance) (16 ms)\n            √ should return 401 for malformed token (8 ms)\n            √ should return 401 for revoked token (7 ms)\n            √ should reject algorithm \"none\" attack (5 ms)\n            √ should ACCEPT tokens expired by up to 30 seconds (clock skew) (6 ms)\n            √ should return 401 for token with future not-before (nbf) claim (6 ms)\n          Refresh Token Logic\n            √ should verify and decode valid refresh token (7 ms)\n            √ should rotate refresh tokens correctly (6 ms)\n            √ should prevent reuse of old refresh token (Replay Attack) (59 ms)\n            √ should fail if refresh token does not have jti (3 ms)\n            √ should handle concurrent refresh attempts (only one succeeds) (10 ms)\n          RBAC Middleware\n            √ should allow access if user has required role (2 ms)\n            √ should deny access if user does not have required role (3 ms)\n            √ should return 401 if user is not authenticated (req.user missing) (1 ms)\n            √ should allow access if user has one of multiple allowed roles (1 ms)\n      \n      Test Suites: 1 passed, 1 total\n      Tests:       19 passed, 19 total\n      Snapshots:   0 total\n      Time:        5.768 s\n      Ran all test suites matching /repository_after\\\\tests\\\\middleware.test.ts/i.\n\n      at tests/meta.test.ts:16:15\n\n    console.log\n      error: null\n\n      at tests/meta.test.ts:17:15\n\n    console.log\n      ----------------------------\n\n      at tests/meta.test.ts:18:15\n\n\nTest Suites: 2 passed, 2 total\nTests:       20 passed, 20 total\nSnapshots:   0 total\nTime:        18.807 s\nRan all test suites.\n"
    },
    "metrics": {}
  },
  "comparison": {
    "passed_gate": true,
    "improvement_summary": "Successfully implemented comprehensive JWT middleware test suite passing all requirements including clock skew, algorithm confusion, and concurrent refresh."
  },
  "success": true,
  "error": null
}